# Правила работы с проектом

Цель этих правил — чтобы проект было легко понимать, поддерживать и безопасно хранить в Git.

## 1) Структура репозитория (что где лежит)

- `kb/sections/*.md` — основной источник знаний (Markdown + YAML‑метаданные).
- `site/docs/sections/*.md` — публичная/витринная копия (подмножество разделов для сайта).
Пока работаем только с Markdown‑файлами, без дополнительных экспортов.

## 2) Источник истины и синхронизация

Источник истины: `kb/sections/*.md`.

Если меняем раздел в `kb/sections/…`, то синхронно обновляем:

- `site/docs/sections/…` (если этот раздел публикуется на сайте).

## 3) Формат контента (KB)

Каждый файл в `kb/sections/*.md` начинается с YAML‑метаданных:

- `id`: стабильный идентификатор (`kb-XX-slug`),
- `title`: заголовок,
- `language`: обычно `he`,
- `tags`: список тегов,
- `source`: откуда взято.

Дальше — текст, короткий и структурированный (списки, подзаголовки), без “воды”.

## 4) Публичное vs. приватное (безопасность)

В Git **нельзя** хранить:

- личные телефоны, адреса, номера документов, номера авто;
- данные клиентов, переписки, скриншоты чатов;
- любые секреты/доступы (токены, ключи, пароли).

Контакты/чувствительные данные храним вне Git, например в `kb/private/…` (папка игнорируется).

Если репозиторий уже публиковался с такими данными, одного удаления в новом коммите недостаточно — историю нужно чистить (по запросу сделаю безопасную процедуру).

## 5) Что считается “мусором” и не должно попадать в репо

- `.DS_Store`, временные файлы редактора, логи;
- `node_modules/`, `build/`, `dist/`, `.next/`, `coverage/`;
- большие бинарники “на всякий случай”.

Это всё должно быть в `.gitignore`.

## 6) Правки и стиль (минимальные договорённости)

- Правим маленькими порциями: 1 смысловая правка = 1 коммит.
- Сообщения коммитов: `chore: …`, `docs: …`, `kb: …` и т.п.
- Не дублируем одно и то же в 3 местах “вручную” без причины — если начинается рассинхрон, останавливаемся и решаем, что генерируется автоматически.
  - Сейчас: вручную поддерживаем только `kb/sections/*.md` (+ при необходимости `site/docs/sections/*.md`).

## 7) Работа с сайтом (Docusaurus)

Папка `site/` — стандартный Docusaurus.

- Требование: Node `>= 20` (см. `site/package.json`).
- Команды:
  - `yarn` — установка зависимостей
  - `yarn start` — dev‑сервер
  - `yarn build` — сборка
