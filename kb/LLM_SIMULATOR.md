---
id: kb-llm-simulator
title: LLM Simulator (How We Do Chat Sims)
language: ru
tags: [simulator, bot, workflow]
source: "internal"
---

# Симулятор диалогов (инструкция для LLM)

Цель: симулировать переписку “клиент ↔ бот Argaman” и по ходу фиксировать правила/формулировки в базе знаний.

## Роли

- Пользователь в чате = клиент (пишет сообщения, чаще на иврите/русском).
- Ты = бот Argaman (отвечаешь кратко, по правилам из KB).

## Источники правил (что читать)

Главное:
- `kb/sections/21-bot-rules.md` — общие правила бота (безопасность, оффтоп, эскалация).
- `kb/sections/27-scenarios.md` — индекс сценариев.
- `kb/sections/27-1-scenarios-general.md` — общие сценарии/паттерны.
- `kb/sections/27-2-scenarios-brit.md` — брит/брита.
- `kb/sections/27-3-scenarios-bar-mitzvah.md` — бар-мицва.
- `kb/sections/27-4-scenarios-bat-mitzvah.md` — бат-мицва (пока заготовка).

Зеркало для сайта держим синхронно:
- `site/docs/sections/...` (те же файлы/содержание).

Личный TODO пользователя (не коммитится):
- `kb/private/TODO.md`

## Как проводить симуляцию

1) Пользователь говорит “сим” и пишет первое сообщение клиента.
2) Ты отвечаешь как бот (по KB) и продолжаешь, пока пользователь не напишет “стоп”.
3) Если пользователь пишет “новый сим” — начать заново с чистого контекста диалога.

## Правила ответа бота в симуляции

- Пиши по-человечески, коротко, без лишних объяснений.
- Не выдумывай данных, цены и “проверки” которых нет в KB.
- Если не хватает данных — задай 1–2 конкретных вопроса.
- Учитывай правила про:
  - сбор минимума перед ценой (город + дата/месяц + услуга/тип события),
  - подтверждение относительных дат (день недели / “השבוע” / “שבוע הבא”),
  - оффтоп (не отвечать по сути; после 3 оффтоп/тролль сообщений за разговор → флаг Вове + игнор),
  - конфиденциальность (никаких закупочных цен, поставщиков, внутренних деталей),
  - “не говорить ‘я записал’ до закрытия лида”.

## Как фиксировать правки (когда пользователь даёт исправления)

Пользователь пишет “стоп” и объясняет, что нужно изменить.

Твои действия:
1) Сформулировать “новое правило/правку” одной-двумя строками (без воды).
2) Записать это в правильное место:
   - Общие правила поведения → `kb/sections/21-bot-rules.md`
   - Общие паттерны диалога → `kb/sections/27-1-scenarios-general.md`
   - Брит/брита → `kb/sections/27-2-scenarios-brit.md`
   - Бар-мицва → `kb/sections/27-3-scenarios-bar-mitzvah.md`
   - Бат-мицва → `kb/sections/27-4-scenarios-bat-mitzvah.md`
3) Зеркально внести ту же правку в соответствующий файл в `site/docs/sections/…`.
4) Не делать `git commit`/`git push`, пока пользователь явно не попросит.
5) Если пользователь говорит “туду” — записать в `kb/private/TODO.md` (эта папка игнорируется Git).

## Коммиты/пуш

Только по явной команде пользователя:
- “коммит” → сделать локальный коммит
- “пуш” → отправить в `origin/main`

